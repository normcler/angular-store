<!doctype html>
<html>
    <head>
        <title>Gem Store</title>
        <link href="bootstrap/css/bootstrap.css" rel="stylesheet">
        <link href="css/main.css" rel="stylesheet">
    </head>
    <body>
        <main class="container" ng-app="myApp">
            <div class="row" ng-controller="myController">
                <div class="col-xs-4" ng-repeat="product in Model">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            {{product.name}}
                        </div>
                        <div class="panel-body">
                            <span class="pull-right">
                            {{product.price || currency}}
                            </span>
                            <p ng-repeat="image in product.images">
                                <img ng-src="{{image.full}}">
                            </p>
                            <section ng-init="tab = 1" ng-controller="panelController">
                                <ul class="nav nav-pills">
                                    <li ng-class="{active:tab===1}"><a href ng-click="selectTab(1)">Description</a></li>
                                    <li ng-class="{active:tab===2}"><a href ng-click="selectTab(2)">Specifications</a></li>
                                    <li ng-class="{active:tab===3}"><a href ng-click="selectTab(3)">Reviews</a></li>
                                </ul>
                                <div class="panel" ng-show="tab === 1">
                                    <h4>Description</h4>
                                    <p>{{product.description}}</p>
                                </div>
                                <div class="panel" ng-show="tab === 2">
                                    <h4>Specifications</h4>
                                    <blockquote>In Development</blockquote>
                                </div>
                                <div class="panel" ng-show="tab === 3">
                                    <h4>Reviews</h4>
                                    <blockquote ng-repeat="review in product.reviews">
                                        <b>Stars: {{review.stars}}</b>
                                        {{review.body}}
                                        <cite>by: {{review.author}}</cite>
                                    </blockquote>
                                    
                                    <h4>Write a Review</h4>
                                    <form name="reviewForm" ng-controller="reviewsController" ng-submit="reviewForm.$valid && addReview(product)" novalidate>
                                        <div class="alert alert-danger" ng-show="(reviewForm.stars.$dirty && reviewForm.stars.$invalid) || (reviewForm.body.$dirty && reviewForm.body.$invalid) || (reviewForm.author.$dirty && reviewForm.author.$invalid)" role="alert"><ul><li ng-show="reviewForm.stars.$dirty && reviewForm.stars.$invalid">Rating is required</li><li ng-show="reviewForm.body.$dirty && reviewForm.body.$invalid">Review is required</li><li ng-show="reviewForm.author.$dirty && reviewForm.author.$invalid">Email is required</li></ul></div>
                                        <blockquote>
                                            <b>Stars: {{newReview.stars}}</b>
                                            {{newReview.body}}
                                            <cite>by: {{newReview.author}}</cite>
                                        </blockquote>
                                        <div class="form-group" ng-class="{'has-error':reviewForm.stars.$dirty && reviewForm.stars.$invalid}">
                                            <label class="control-label" for="stars">Rating</label>
                                            <select name="stars" class="form-control" ng-model="newReview.stars" required>
                                                <option value="">Select an item</option>
                                                <option value="1">1 star</option>
                                                <option value="2">2 stars</option>
                                                <option value="3">3 stars</option>
                                                <option value="4">4 stars</option>
                                                <option value="5">5 stars</option>
                                            </select>
                                        </div>
                                        <div class="form-group" ng-class="{'has-error':reviewForm.body.$dirty && reviewForm.body.$invalid}">
                                            <label class="control-label" for="body">Review</label>
                                            <textarea name="body" class="form-control" placeholder="Write your review..." ng-model="newReview.body" required></textarea>
                                        </div>
                                        <div class="form-group" ng-class="{'has-error':reviewForm.author.$dirty && reviewForm.author.$invalid}">
                                            <label class="control-label" for="author">Email Address</label>
                                            <input type="email" placeholder="Email Address" name="author" class="form-control"  ng-model="newReview.author" required /> 
                                        </div>
                                        <input type="submit" value="Add Review" class="btn btn-default" ng-disable  ="!product.canPurchase" />
                                    </form>
                                </div>
                            </section>
                            <button class="btn btn-default">Add to cart</button>
                        </div>
                    </div>
                </div>
            </div>
        <!-- <my-directive></my-directive> -->
        </main>
        
        <script src="bootstrap/js/jquery-3.2.1.js"></script>
        <script src="bootstrap/js/bootstrap.js"></script>
        <script src="js/angular.js"></script>
        <script src="js/app.js"></script>
    </body>
</html>